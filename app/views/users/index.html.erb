<% provide(:title, 'All Users') %>
<h1>ユーザー一覧</h1>



<div class="csv">
   <%= form_with url: csv_import_users_path , multipart: true do |f|%>
     <%= file_field_tag :file, accept: '.csv'  %>
     <%= submit_tag "CSVインポート", class: "btn btn-primary btn-signup"%>
   <% end %> 
</div>

<div class="col-md-10 col-md-offset-1">
 <%= will_paginate %>
     <% @users.each do |user| %>
     <div>
      <%= user.name %> <br/>
     </div> 
       <%= link_to "削除", user, method: :delete,
                        data: { confirm: "削除してよろしいですか？" }, class: "btn btn-primary" %>
  <div class="panel-group">
   <div class="panel panel-default">
     <div class="panel-heading">
      <h4 class="panel-title">
        <button class="btn btn-primary btn-lg" data-toggle="collapse" data-target="#collapse<%= user.id %>">編集</button>
      </h4>
     </div>
     <div id="collapse<%= user.id %>" class="panel-collapse collapse">
      <div class="panel-body">
        <div class="row">
         <div class="col-md-6 col-md-offset-3">
           <%= form_with(model: user, local: true) do |f| %>
           
           <%= render 'shared/error_messages', object: user %>
            <%= f.label :名前, class: "label-signup" %>
            <%= f.text_field :name, class: "form-control", value: user.name %>
            
            <%= f.label :メールアドレス, class: "label-signup" %>
            <%= f.email_field :email, class: "form-control", value: user.email %>
            
            <%= f.label :所属, class: "label-signup" %>
            <%= f.text_field :affiliation, class: "form-control", value: user.affiliation %>
            
            <%= f.label :社員番号, class: "label-signup" %>
            <%= f.text_field :employee_number, class: "form-control", value: user.employee_number %>
            
            <%= f.label :カードID, class: "label-signup" %>
            <%= f.text_field :uid, class: "form-control", value: user.uid %>
            
            <%= f.label :パスワード, class: "label-signup" %>
            <%= f.password_field :password, class: "form-control", value: user.password %>
            
            <%= f.label :基本勤務時間, class: "label-signup" %>
            <%= f.time_field :basic_work_time, class: "form-control"%>
            
            <%= f.label :指定勤務開始時間, class: "label-signup" %>
            <%= f.time_field :designated_work_start_time, class: "form-control" %>
            
            <%= f.label :指定勤務終了時間, class: "label-signup" %>
            <%= f.time_field :designated_work_end_time, class: "form-control" %>
            
            <%= f.submit "編集", class: "btn btn-primary btn-block btn-signup" %>
            
           <% end %>  
         </div>
       </div>
      </div>
     </div>
   </div>
  </div>
    <% end %>
 <%= will_paginate %>  
</div>


